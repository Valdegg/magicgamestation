<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTG Market Scanner</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #6B5844 0%, #C5A572 25%, #E8D4A0 50%, #C5A572 75%, #6B5844 100%);
            min-height: 100vh; padding: 20px; color: #333;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header {
            background: white; border-radius: 16px; padding: 30px; margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        h1 { font-size: 2.5em; color: #2d3748; margin-bottom: 10px; }
        
        /* Tab Navigation */
        .tabs {
            display: flex; gap: 10px; margin-bottom: 30px;
        }
        .tab {
            background: white; border: none; padding: 15px 30px; border-radius: 12px;
            font-size: 1em; font-weight: 600; cursor: pointer;
            transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .tab.active {
            background: linear-gradient(135deg, #6B5844 0%, #C5A572 50%, #6B5844 100%);
            color: white;
        }
        .tab:hover:not(.active) {
            background: #f7fafc; transform: translateY(-2px);
        }
        
        /* Tab Content */
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        
        /* Stats */
        .stats { display: flex; gap: 20px; margin-top: 20px; flex-wrap: wrap; }
        .stat {
            background: linear-gradient(135deg, #6B5844 0%, #C5A572 50%, #6B5844 100%);
            color: white; padding: 15px 25px; border-radius: 12px; font-size: 0.9em;
        }
        .stat-number { font-size: 2em; font-weight: bold; display: block; }
        
        /* Seller Card */
        .seller-card {
            background: white; border-radius: 16px; padding: 25px; margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08); transition: transform 0.2s;
        }
        .seller-card:hover { transform: translateY(-4px); }
        .seller-header {
            display: flex; justify-content: space-between; align-items: center;
            padding-bottom: 20px; border-bottom: 2px solid #e2e8f0; margin-bottom: 20px;
        }
        .seller-name { font-size: 1.5em; font-weight: bold; color: #2d3748; }
        .seller-info { font-size: 0.9em; color: #718096; }
        
        /* Deals */
        .deals { display: grid; gap: 15px; }
        .deal {
            background: linear-gradient(to right, #f7fafc 0%, #edf2f7 100%);
            border-radius: 12px; padding: 20px; border-left: 4px solid #48bb78;
            display: flex; gap: 15px;
            overflow: visible;
            position: relative;
        }
        .deal-image { 
            width: 100px; height: auto; border-radius: 8px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.15); flex-shrink: 0;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            z-index: 1;
        }
        .deal-image:hover { 
            transform: scale(3.5);
            box-shadow: 0 8px 24px rgba(0,0,0,0.35);
            z-index: 1000;
            border: 2px solid #48bb78;
        }
        .deal-content { flex: 1; }
        .deal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .card-name { font-size: 1.2em; font-weight: 600; color: #2d3748; }
        .price-tag { font-size: 1.5em; font-weight: bold; color: #48bb78; }
        .deal-info { display: flex; gap: 20px; margin-bottom: 12px; font-size: 0.95em; color: #4a5568; flex-wrap: wrap; }
        .badge { padding: 4px 12px; border-radius: 6px; font-size: 0.85em; font-weight: 600; }
        .badge-excellent { background: #9ae6b4; color: #22543d; }
        .badge-good { background: #fbd38d; color: #744210; }
        .badge-expensive { background: #feb2b2; color: #742a2a; }
        .discount { color: #48bb78; font-weight: 600; }
        .card-links { display: flex; gap: 10px; flex-wrap: wrap; }
        .btn {
            display: inline-block; padding: 8px 16px; border-radius: 8px;
            text-decoration: none; font-size: 0.85em; font-weight: 600;
            transition: all 0.2s;
        }
        .btn-cardmarket { background: #3182ce; color: white; }
        .btn-cardmarket:hover { background: #2c5282; }
        .btn-mtgstocks { background: #ed8936; color: white; }
        .btn-mtgstocks:hover { background: #c05621; }
        
        /* Rejected Cards Styling */
        .rejected-section {
            background: white; border-radius: 16px; padding: 25px; margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        .rejected-header {
            font-size: 1.5em; font-weight: bold; color: #2d3748;
            margin-bottom: 15px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0;
        }
        .rejected-description {
            background: #f7fafc; padding: 15px; border-radius: 8px;
            margin-bottom: 20px; color: #4a5568; line-height: 1.6;
        }
        .rejected-card {
            background: #f7fafc; border-radius: 12px; padding: 20px;
            border-left: 4px solid #cbd5e0; margin-bottom: 15px;
            display: flex; gap: 15px;
            overflow: visible;
            position: relative;
        }
        
        /* Filters */
        .filters {
            background: white; border-radius: 16px; padding: 20px; margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        .filters h3 {
            font-size: 1.2em; margin-bottom: 15px; color: #2d3748;
        }
        .filter-section {
            margin-bottom: 20px;
        }
        .filter-section h4 {
            font-size: 1em; margin-bottom: 10px; color: #4a5568;
        }
        .filter-group {
            display: flex; gap: 10px; flex-wrap: wrap; align-items: center;
        }
        .checkbox-group {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px; max-height: 200px; overflow-y: auto;
            padding: 10px; background: #f7fafc; border-radius: 8px;
        }
        .filter-checkbox {
            display: flex; align-items: center; gap: 6px;
            font-size: 0.9em; cursor: pointer;
        }
        .filter-checkbox input {
            cursor: pointer;
        }
        .filter-select {
            padding: 10px 15px; border: 2px solid #e2e8f0; border-radius: 8px;
            font-size: 0.95em; background: white; cursor: pointer;
            transition: border-color 0.2s;
        }
        .filter-select:hover {
            border-color: #C5A572;
        }
        .filter-select:focus {
            outline: none; border-color: #6B5844;
        }
        .price-input {
            width: 100px; padding: 10px 15px; border: 2px solid #e2e8f0; border-radius: 8px;
            font-size: 0.95em; background: white;
            transition: border-color 0.2s;
        }
        .price-input:hover {
            border-color: #C5A572;
        }
        .price-input:focus {
            outline: none; border-color: #6B5844;
        }
        .set-badge {
            display: inline-block; padding: 4px 10px; background: #e2e8f0;
            border-radius: 6px; font-size: 0.85em; color: #4a5568; font-weight: 500;
        }
        .source-badge {
            display: inline-block; padding: 4px 10px; background: #C5A572;
            border-radius: 6px; font-size: 0.85em; color: white; font-weight: 600;
        }
        .source-badge-wishlist { background: #9F7AEA; }
        .source-badge-deck { background: #ED8936; }
        .source-badge-reserved { background: #E53E3E; }
        .source-badge-candidates { background: #38B2AC; }
        .country-badge {
            display: inline-block; padding: 4px 10px; background: #4299e1;
            border-radius: 6px; font-size: 0.85em; color: white; font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üÉè MTG Market Scanner</h1>
            <div class="stats">
                <div class="stat">
                    <span class="stat-number">11</span>
                    Good Deals
                </div>
                <div class="stat">
                    <span class="stat-number">11</span>
                    Sellers
                </div>
                <div class="stat">
                    <span class="stat-number">37</span>
                    Rejected Cards
                </div>
                <div class="stat">
                    <span class="stat-number">‚â•7%</span>
                    Discount Threshold
                </div>
            </div>
        </header>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('deals')">‚úÖ Good Deals (11)</button>
            <button class="tab" onclick="showTab('rejected')">‚ùå Rejected Cards (37)</button>
        </div>
        
        <div class="filters">
            <h3>üîç Filters</h3>
            
            <div class="filter-section">
                <h4>üì¶ Sets (select multiple)</h4>
                <div id="set-checkboxes" class="checkbox-group">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
            
            <div class="filter-section">
                <h4>üìã Source (select multiple)</h4>
                <div id="source-checkboxes" class="checkbox-group">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
            
            <div class="filter-section">
                <h4>üåç Country (select multiple)</h4>
                <div id="country-checkboxes" class="checkbox-group">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
            
            <div class="filter-section">
                <h4>üí∞ Price Range (‚Ç¨)</h4>
                <div class="filter-group">
                    <label for="price-min">Min:</label>
                    <input type="number" id="price-min" class="price-input" placeholder="0" min="0" step="0.01" oninput="filterCards()">
                    <label for="price-max">Max:</label>
                    <input type="number" id="price-max" class="price-input" placeholder="999" min="0" step="0.01" oninput="filterCards()">
                </div>
            </div>
            
            <div class="filter-section">
                <h4>üîÑ Sort By</h4>
                <div class="filter-group">
                    <select id="sort-by" class="filter-select" onchange="sortCards()">
                        <option value="default">Default (by seller)</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="discount-high">Discount: Highest First</option>
                        <option value="discount-low">Discount: Lowest First</option>
                        <option value="name-az">Card Name: A-Z</option>
                        <option value="name-za">Card Name: Z-A</option>
                        <option value="set-az">Set: A-Z</option>
                        <option value="quality">Quality: Excellent ‚Üí Good</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-section">
                <h4>üë§ Seller</h4>
                <div class="filter-group">
                    <select id="seller-filter" class="filter-select" onchange="filterCards()">
                        <option value="">All Sellers</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-group">
                <button onclick="selectAllSets()" class="btn btn-cardmarket">Select All Sets</button>
                <button onclick="deselectAllSets()" class="btn btn-mtgstocks">Clear Sets</button>
                <button onclick="resetFilters()" class="btn btn-cardmarket">Reset All Filters</button>
            </div>
        </div>

        <div id="deals-tab" class="tab-content active">

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">snoopylittlebirdy</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/snoopylittlebirdy" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Unlimited" data-seller="snoopylittlebirdy" data-source="Deck Wishlist" data-country="Ireland" data-price="179.99" 
                 data-discount="21.23" data-card-name="Mana Vault" data-quality="2">
                <img src="../card_images/Mana_Vault.jpg" alt="Mana Vault" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Mana Vault</span>
                        <span class="price-tag">‚Ç¨179.99</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-excellent">‚≠ê Excellent</span>
                        <span>EX</span>
                        <span class="discount">-21.2% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨228.50)</span>
                        <span class="set-badge">Unlimited</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç Ireland</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Unlimited/Mana-Vault?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Mana%20Vault%20Unlimited%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">Bronhy</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/Bronhy" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Unlimited" data-seller="Bronhy" data-source="Deck Wishlist" data-country="Croatia" data-price="199.98" 
                 data-discount="12.48" data-card-name="Mana Vault" data-quality="2">
                <img src="../card_images/Mana_Vault.jpg" alt="Mana Vault" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Mana Vault</span>
                        <span class="price-tag">‚Ç¨199.98</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-excellent">‚≠ê Excellent</span>
                        <span>EX</span>
                        <span class="discount">-12.5% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨228.50)</span>
                        <span class="set-badge">Unlimited</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç Croatia</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Unlimited/Mana-Vault?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Mana%20Vault%20Unlimited%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">Borriolenc</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/Borriolenc" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Ice Age" data-seller="Borriolenc" data-source="Deck Wishlist" data-country="Spain" data-price="17.00" 
                 data-discount="9.78" data-card-name="Necropotence" data-quality="2">
                <img src="../card_images/Necropotence.jpg" alt="Necropotence" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Necropotence</span>
                        <span class="price-tag">‚Ç¨17.00</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-excellent">‚≠ê Excellent</span>
                        <span>EX</span>
                        <span class="discount">-9.8% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨18.84)</span>
                        <span class="set-badge">Ice Age</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç Spain</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Ice-Age/Necropotence?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Necropotence%20Ice%20Age%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">Gear-Head-Games</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/Gear-Head-Games" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Urzas Legacy" data-seller="Gear-Head-Games" data-source="Deck Wishlist" data-country="United Kingdom" data-price="20.44" 
                 data-discount="11.25" data-card-name="Palinchron" data-quality="2">
                <img src="../card_images/Palinchron.jpg" alt="Palinchron" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Palinchron</span>
                        <span class="price-tag">‚Ç¨20.44</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-excellent">‚≠ê Excellent</span>
                        <span>EX</span>
                        <span class="discount">-11.2% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨23.03)</span>
                        <span class="set-badge">Urzas Legacy</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç United Kingdom</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Urzas-Legacy/Palinchron?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Palinchron%20Urzas%20Legacy%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">Paool</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/Paool" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Torment" data-seller="Paool" data-source="Deck Wishlist" data-country="Poland" data-price="15.00" 
                 data-discount="11.69" data-card-name="Cabal Coffers" data-quality="2">
                <img src="../card_images/Cabal_Coffers.jpg" alt="Cabal Coffers" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Cabal Coffers</span>
                        <span class="price-tag">‚Ç¨15.00</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-excellent">‚≠ê Excellent</span>
                        <span>EX</span>
                        <span class="discount">-11.7% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨16.98)</span>
                        <span class="set-badge">Torment</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç Poland</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Torment/Cabal-Coffers?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Cabal%20Coffers%20Torment%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">handri</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/handri" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Urzas Legacy" data-seller="handri" data-source="Deck Wishlist" data-country="Greece" data-price="200.00" 
                 data-discount="26.12" data-card-name="Grim Monolith" data-quality="2">
                <img src="../card_images/Grim_Monolith.jpg" alt="Grim Monolith" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Grim Monolith</span>
                        <span class="price-tag">‚Ç¨200.00</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-excellent">‚≠ê Excellent</span>
                        <span>EX</span>
                        <span class="discount">-26.1% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨270.70)</span>
                        <span class="set-badge">Urzas Legacy</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç Greece</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Urzas-Legacy/Grim-Monolith?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Grim%20Monolith%20Urzas%20Legacy%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">IBARI</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/IBARI" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Stronghold" data-seller="IBARI" data-source="Deck Wishlist" data-country="Spain" data-price="52.95" 
                 data-discount="15.36" data-card-name="Volrath's Stronghold" data-quality="2">
                <img src="../card_images/Volraths_Stronghold.jpg" alt="Volrath's Stronghold" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Volrath's Stronghold</span>
                        <span class="price-tag">‚Ç¨52.95</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-excellent">‚≠ê Excellent</span>
                        <span>EX</span>
                        <span class="discount">-15.4% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨62.56)</span>
                        <span class="set-badge">Stronghold</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç Spain</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Stronghold/Volrath-s-Stronghold?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Volrath%27s%20Stronghold%20Stronghold%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">mudds</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/mudds" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Tempest" data-seller="mudds" data-source="Deck Wishlist" data-country="United Kingdom" data-price="10.00" 
                 data-discount="22.72" data-card-name="Reanimate" data-quality="2">
                <img src="../card_images/Reanimate.jpg" alt="Reanimate" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Reanimate</span>
                        <span class="price-tag">‚Ç¨10.00</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-excellent">‚≠ê Excellent</span>
                        <span>EX</span>
                        <span class="discount">-22.7% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨12.94)</span>
                        <span class="set-badge">Tempest</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç United Kingdom</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Tempest/Reanimate?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Reanimate%20Tempest%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">oldmagiccollector</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/oldmagiccollector" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Beta" data-seller="oldmagiccollector" data-source="Deck Wishlist" data-country="France" data-price="496.00" 
                 data-discount="13.48" data-card-name="Counterspell" data-quality="0">
                <img src="../card_images/Counterspell.jpg" alt="Counterspell" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Counterspell</span>
                        <span class="price-tag">‚Ç¨496.00</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-expensive">‚ùå Expensive</span>
                        <span>EX</span>
                        <span class="discount">-13.5% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨573.25)</span>
                        <span class="set-badge">Beta</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç France</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Beta/Counterspell?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Counterspell%20Beta%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">Phil-Magic-Ippe</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/Phil-Magic-Ippe" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Beta" data-seller="Phil-Magic-Ippe" data-source="Deck Wishlist" data-country="France" data-price="500.00" 
                 data-discount="12.78" data-card-name="Counterspell" data-quality="0">
                <img src="../card_images/Counterspell.jpg" alt="Counterspell" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Counterspell</span>
                        <span class="price-tag">‚Ç¨500.00</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-expensive">‚ùå Expensive</span>
                        <span>EX</span>
                        <span class="discount">-12.8% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨573.25)</span>
                        <span class="set-badge">Beta</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç France</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Beta/Counterspell?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Counterspell%20Beta%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="seller-card">
            <div class="seller-header">
                <div>
                    <div class="seller-name">Paolo65</div>
                    <div class="seller-info">1 deal</div>
                </div>
                <a href="https://www.cardmarket.com/en/Magic/Users/Paolo65" target="_blank" class="btn btn-cardmarket">View Seller Profile</a>
            </div>
            <div class="deals">
                
            <div class="deal" data-set="Ice Age" data-seller="Paolo65" data-source="Deck Wishlist" data-country="Switzerland" data-price="12.00" 
                 data-discount="15.04" data-card-name="Dance of the Dead" data-quality="2">
                <img src="../card_images/Dance_of_the_Dead.jpg" alt="Dance of the Dead" class="deal-image" onerror="this.style.display='none'">
                <div class="deal-content">
                    <div class="deal-header">
                        <span class="card-name">Dance of the Dead</span>
                        <span class="price-tag">‚Ç¨12.00</span>
                    </div>
                    <div class="deal-info">
                        <span class="badge badge-excellent">‚≠ê Excellent</span>
                        <span>EX</span>
                        <span class="discount">-15.0% vs avg</span>
                        <span>(Avg of #2-5: ‚Ç¨14.12)</span>
                        <span class="set-badge">Ice Age</span>
                        <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        <span class="country-badge">üåç Switzerland</span>
                    </div>
                    <div class="card-links">
                        <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Ice-Age/Dance-Of-The-Dead?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        <a href="https://www.google.com/search?btnI=1&q=Dance%20of%20the%20Dead%20Ice%20Age%20site%3Amtgstocks.com" target="_blank" class="btn btn-mtgstocks">Price History</a>
                    </div>
                </div>
            </div>

            </div>
        </div>
</div>
        <div id="rejected-tab" class="tab-content">

        <div class="rejected-section">
            <div class="rejected-header">‚ùå Expensive (5 cards)</div>
            <div class="rejected-description">
                These cards have live EX+ prices above the adjusted TREND (TREND + 15% condition premium).
                Not worth buying at current market prices.
            </div>
            <div class="cards">

                <div class="rejected-card">
                    <img src="../card_images/City_of_Brass.jpg" alt="City of Brass" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">City of Brass</span>
                            <span class="price-tag">‚Ç¨549.95</span>
                        </div>
                        <div class="deal-info">
                            <span>EX+ price above TREND+15% (‚Ç¨461.98)</span>
                            <span>TREND: ‚Ç¨401.72</span>
                            <span class="set-badge">Arabian Nights</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Arabian-Nights/City-Of-Brass?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Dark_Ritual.jpg" alt="Dark Ritual" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Dark Ritual</span>
                            <span class="price-tag">‚Ç¨125.00</span>
                        </div>
                        <div class="deal-info">
                            <span>EX+ price above TREND+15% (‚Ç¨115.22)</span>
                            <span>TREND: ‚Ç¨100.19</span>
                            <span class="set-badge">Beta</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Beta/Dark-Ritual?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Mirror_Universe.jpg" alt="Mirror Universe" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Mirror Universe</span>
                            <span class="price-tag">‚Ç¨250.00</span>
                        </div>
                        <div class="deal-info">
                            <span>EX+ price above TREND+15% (‚Ç¨241.80)</span>
                            <span>TREND: ‚Ç¨210.26</span>
                            <span class="set-badge">Legends</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Legends/Mirror-Universe?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Counterspell.jpg" alt="Counterspell" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Counterspell</span>
                            <span class="price-tag">‚Ç¨496.00</span>
                        </div>
                        <div class="deal-info">
                            <span>EX+ price above TREND+15% (‚Ç¨396.26)</span>
                            <span>TREND: ‚Ç¨344.57</span>
                            <span class="set-badge">Beta</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Beta/Counterspell?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Demonic_Tutor.jpg" alt="Demonic Tutor" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Demonic Tutor</span>
                            <span class="price-tag">‚Ç¨618.54</span>
                        </div>
                        <div class="deal-info">
                            <span>EX+ price above TREND+15% (‚Ç¨476.39)</span>
                            <span>TREND: ‚Ç¨414.25</span>
                            <span class="set-badge">Beta</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Beta/Demonic-Tutor?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>
</div></div>
        <div class="rejected-section">
            <div class="rejected-header">üìä Below Threshold (20 cards)</div>
            <div class="rejected-description">
                These cards are good deals (below TREND) but no individual seller offers ‚â•7% discount vs the baseline average.
                All sellers cluster at similar prices.
            </div>
            <div class="cards">

                <div class="rejected-card">
                    <img src="../card_images/Transmute_Artifact.jpg" alt="Transmute Artifact" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Transmute Artifact</span>
                            <span class="price-tag">‚Ç¨314.95</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Antiquities</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Antiquities/Transmute-Artifact?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Sylvan_Library.jpg" alt="Sylvan Library" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Sylvan Library</span>
                            <span class="price-tag">‚Ç¨129.99</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Legends</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Legends/Sylvan-Library?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Gilded_Drake.jpg" alt="Gilded Drake" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Gilded Drake</span>
                            <span class="price-tag">‚Ç¨140.19</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Urza's Saga</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Urzas-Saga/Gilded-Drake?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Yawgmoths_Will.jpg" alt="Yawgmoth's Will" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Yawgmoth's Will</span>
                            <span class="price-tag">‚Ç¨110.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Urza's Saga</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Urzas-Saga/Yawgmoth-s-Will?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Memory_Jar.jpg" alt="Memory Jar" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Memory Jar</span>
                            <span class="price-tag">‚Ç¨21.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Urza's Legacy</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Urzas-Legacy/Memory-Jar?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/City_of_Traitors.jpg" alt="City of Traitors" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">City of Traitors</span>
                            <span class="price-tag">‚Ç¨289.99</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Exodus</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Exodus/City-Of-Traitors?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Intuition.jpg" alt="Intuition" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Intuition</span>
                            <span class="price-tag">‚Ç¨140.47</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Tempest</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Tempest/Intuition?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Rhystic_Study.jpg" alt="Rhystic Study" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Rhystic Study</span>
                            <span class="price-tag">‚Ç¨31.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Prophecy</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Prophecy/Rhystic-Study?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Lions_Eye_Diamond.jpg" alt="Lion's Eye Diamond" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Lion's Eye Diamond</span>
                            <span class="price-tag">‚Ç¨325.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Mirage</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Mirage/Lion-s-Eye-Diamond?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Underground_River.jpg" alt="Underground River" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Underground River</span>
                            <span class="price-tag">‚Ç¨15.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Ice Age</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Ice-Age/Underground-River?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Bayou.jpg" alt="Bayou" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Bayou</span>
                            <span class="price-tag">‚Ç¨273.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Revised</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Revised/Bayou?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Mana_Drain.jpg" alt="Mana Drain" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Mana Drain</span>
                            <span class="price-tag">‚Ç¨144.46</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Legends</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Legends/Mana-Drain?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Oath_of_Druids.jpg" alt="Oath of Druids" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Oath of Druids</span>
                            <span class="price-tag">‚Ç¨17.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Exodus</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Exodus/Oath-Of-Druids?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Power_Artifact.jpg" alt="Power Artifact" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Power Artifact</span>
                            <span class="price-tag">‚Ç¨135.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Antiquities</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Antiquities/Power-Artifact?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Exploration.jpg" alt="Exploration" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Exploration</span>
                            <span class="price-tag">‚Ç¨33.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Urza's Saga</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Urzas-Saga/Exploration?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Survival_of_the_Fittest.jpg" alt="Survival of the Fittest" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Survival of the Fittest</span>
                            <span class="price-tag">‚Ç¨176.67</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Exodus</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Exodus/Survival-Of-The-Fittest?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Underworld_Dreams.jpg" alt="Underworld Dreams" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Underworld Dreams</span>
                            <span class="price-tag">‚Ç¨90.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Legends</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Legends/Underworld-Dreams?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Time_Spiral.jpg" alt="Time Spiral" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Time Spiral</span>
                            <span class="price-tag">‚Ç¨59.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Urza's Saga</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Urzas-Saga/Time-Spiral?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Shallow_Grave.jpg" alt="Shallow Grave" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Shallow Grave</span>
                            <span class="price-tag">‚Ç¨69.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Mirage</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Mirage/Shallow-Grave?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Yavimaya_Hollow.jpg" alt="Yavimaya Hollow" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="deal-header">
                            <span class="card-name">Yavimaya Hollow</span>
                            <span class="price-tag">‚Ç¨42.00</span>
                        </div>
                        <div class="deal-info">
                            <span>Good price but sellers cluster together</span>
                            <span class="set-badge">Urza's Destiny</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                        <div class="card-links">
                            <a href="https://www.cardmarket.com/en/Magic/Products/Singles/Urzas-Destiny/Yavimaya-Hollow?language=1&minCondition=3" target="_blank" class="btn btn-cardmarket">View on Cardmarket</a>
                        </div>
                    </div>
                </div>
</div></div>
        <div class="rejected-section">
            <div class="rejected-header">‚ö†Ô∏è No Live Data (12 cards)</div>
            <div class="rejected-description">
                Could not scrape live prices for these cards. Usually due to no listings, scraping failure, or name/set mismatch.
            </div>
            <div class="cards">

                <div class="rejected-card">
                    <img src="../card_images/Drain_Life.jpg" alt="Drain Life" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Drain Life</div>
                        <div class="deal-info">
                            <span class="set-badge">Beta</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Pernicious_Deed.jpg" alt="Pernicious Deed" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Pernicious Deed</div>
                        <div class="deal-info">
                            <span class="set-badge">Apocalypse</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Triskelion.jpg" alt="Triskelion" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Triskelion</div>
                        <div class="deal-info">
                            <span class="set-badge">Antiquities</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Kokusho_the_Evening_Star.jpg" alt="Kokusho, the Evening Star" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Kokusho, the Evening Star</div>
                        <div class="deal-info">
                            <span class="set-badge">Champions of Kamigawa</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Copy_Artifact.jpg" alt="Copy Artifact" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Copy Artifact</div>
                        <div class="deal-info">
                            <span class="set-badge">Revised</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Time_Warp.jpg" alt="Time Warp" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Time Warp</div>
                        <div class="deal-info">
                            <span class="set-badge">Tempest</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Recall.jpg" alt="Recall" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Recall</div>
                        <div class="deal-info">
                            <span class="set-badge">Legends</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Air_Elemental.jpg" alt="Air Elemental" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Air Elemental</div>
                        <div class="deal-info">
                            <span class="set-badge">Beta</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Fellwar_Stone.jpg" alt="Fellwar Stone" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Fellwar Stone</div>
                        <div class="deal-info">
                            <span class="set-badge">The Dark</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Lotus_Petal.jpg" alt="Lotus Petal" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Lotus Petal</div>
                        <div class="deal-info">
                            <span class="set-badge">Tempest</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Sengir_Vampire.jpg" alt="Sengir Vampire" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Sengir Vampire</div>
                        <div class="deal-info">
                            <span class="set-badge">Beta</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>

                <div class="rejected-card">
                    <img src="../card_images/Birds_of_Paradise.jpg" alt="Birds of Paradise" class="deal-image" onerror="this.style.display='none'">
                    <div class="deal-content">
                        <div class="card-name">Birds of Paradise</div>
                        <div class="deal-info">
                            <span class="set-badge">Revised</span>
                            <span>No live data available</span>
                            <span class="source-badge source-badge-deck">üìã Deck Wishlist</span>
                        </div>
                    </div>
                </div>
</div></div></div>
    </div>
    
    <script>
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }
        
        // Populate filter controls on page load
        window.addEventListener('DOMContentLoaded', function() {
            const deals = document.querySelectorAll('.deal[data-set]');
            const sets = new Set();
            const sellers = new Set();
            const sources = new Set();
            const countries = new Set();
            
            deals.forEach(deal => {
                const set = deal.getAttribute('data-set');
                const seller = deal.getAttribute('data-seller');
                const source = deal.getAttribute('data-source');
                const country = deal.getAttribute('data-country');
                if (set) sets.add(set);
                if (seller) sellers.add(seller);
                if (source) sources.add(source);
                if (country) countries.add(country);
            });
            
            // Populate set checkboxes
            const setCheckboxes = document.getElementById('set-checkboxes');
            Array.from(sets).sort().forEach(set => {
                const label = document.createElement('label');
                label.className = 'filter-checkbox';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.value = set;
                checkbox.checked = true;  // All selected by default
                checkbox.onchange = filterCards;
                
                const text = document.createTextNode(set);
                
                label.appendChild(checkbox);
                label.appendChild(text);
                setCheckboxes.appendChild(label);
            });
            
            // Populate source checkboxes
            const sourceCheckboxes = document.getElementById('source-checkboxes');
            const sourceOrder = ['Reserved List', 'Deck Wishlist', 'Wishlist', 'Candidates', 'Price Candidates'];
            const sortedSources = Array.from(sources).sort((a, b) => {
                const indexA = sourceOrder.indexOf(a);
                const indexB = sourceOrder.indexOf(b);
                if (indexA === -1 && indexB === -1) return a.localeCompare(b);
                if (indexA === -1) return 1;
                if (indexB === -1) return -1;
                return indexA - indexB;
            });
            
            sortedSources.forEach(source => {
                const label = document.createElement('label');
                label.className = 'filter-checkbox';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.value = source;
                checkbox.checked = true;  // All selected by default
                checkbox.onchange = filterCards;
                
                // Add emoji based on source
                let emoji = 'üìã';
                if (source.includes('Reserved')) emoji = 'üî¥';
                else if (source.includes('Deck')) emoji = 'üü†';
                else if (source.includes('Wishlist') && !source.includes('Deck')) emoji = 'üü£';
                else if (source.includes('Candidates')) emoji = 'üîµ';
                
                const text = document.createTextNode(` ${emoji} ${source}`);
                
                label.appendChild(checkbox);
                label.appendChild(text);
                sourceCheckboxes.appendChild(label);
            });
            
            // Populate country checkboxes
            const countryCheckboxes = document.getElementById('country-checkboxes');
            Array.from(countries).sort().forEach(country => {
                const label = document.createElement('label');
                label.className = 'filter-checkbox';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.value = country;
                checkbox.checked = true;  // All selected by default
                checkbox.onchange = filterCards;
                
                const text = document.createTextNode(` ${country}`);
                
                label.appendChild(checkbox);
                label.appendChild(text);
                countryCheckboxes.appendChild(label);
            });
            
            // Populate seller filter
            const sellerFilter = document.getElementById('seller-filter');
            Array.from(sellers).sort().forEach(seller => {
                const option = document.createElement('option');
                option.value = seller;
                option.textContent = seller;
                sellerFilter.appendChild(option);
            });
        });
        
        function filterCards() {
            // Get selected sets from checkboxes
            const selectedSets = new Set();
            document.querySelectorAll('#set-checkboxes input[type="checkbox"]:checked').forEach(cb => {
                selectedSets.add(cb.value);
            });
            
            // Get selected sources from checkboxes
            const selectedSources = new Set();
            document.querySelectorAll('#source-checkboxes input[type="checkbox"]:checked').forEach(cb => {
                selectedSources.add(cb.value);
            });
            
            // Get selected countries from checkboxes
            const selectedCountries = new Set();
            document.querySelectorAll('#country-checkboxes input[type="checkbox"]:checked').forEach(cb => {
                selectedCountries.add(cb.value);
            });
            
            const sellerFilter = document.getElementById('seller-filter').value;
            const priceMin = parseFloat(document.getElementById('price-min').value) || 0;
            const priceMax = parseFloat(document.getElementById('price-max').value) || Infinity;
            
            // Filter deals in both original seller view and sorted view
            const deals = document.querySelectorAll('.deal[data-set]');
            const sellerCards = document.querySelectorAll('.seller-card');
            
            let visibleCount = 0;
            
            deals.forEach(deal => {
                const dealSet = deal.getAttribute('data-set');
                const dealSeller = deal.getAttribute('data-seller');
                const dealSource = deal.getAttribute('data-source');
                const dealCountry = deal.getAttribute('data-country');
                const dealPrice = parseFloat(deal.getAttribute('data-price')) || 0;
                
                // Match if set is in selected sets (or all sets if none selected)
                const setMatch = selectedSets.size === 0 || selectedSets.has(dealSet);
                const sourceMatch = selectedSources.size === 0 || selectedSources.has(dealSource);
                const countryMatch = selectedCountries.size === 0 || selectedCountries.has(dealCountry);
                const sellerMatch = !sellerFilter || dealSeller === sellerFilter;
                const priceMatch = dealPrice >= priceMin && dealPrice <= priceMax;
                
                if (setMatch && sourceMatch && countryMatch && sellerMatch && priceMatch) {
                    deal.style.display = 'flex';
                    visibleCount++;
                } else {
                    deal.style.display = 'none';
                }
            });
            
            // Hide seller cards that have no visible deals (only in seller-grouped view)
            // Don't toggle seller cards if we're in sorted view
            const dealsTab = document.getElementById('deals-tab');
            const sortedContainer = dealsTab ? dealsTab.querySelector('.sorted-deals-container') : null;
            const inSortedMode = sortedContainer && sortedContainer.style.display !== 'none';
            
            if (!inSortedMode) {
                sellerCards.forEach(sellerCard => {
                    const visibleDeals = sellerCard.querySelectorAll('.deal[data-set]:not([style*="display: none"])');
                    if (visibleDeals.length > 0) {
                        sellerCard.style.display = 'block';
                    } else {
                        sellerCard.style.display = 'none';
                    }
                });
            }
            
            console.log(`Filtered: ${visibleCount} deals visible (${selectedSets.size} sets selected, ‚Ç¨${priceMin}-‚Ç¨${priceMax === Infinity ? '‚àû' : priceMax})`);
        }
        
        function selectAllSets() {
            document.querySelectorAll('#set-checkboxes input[type="checkbox"]').forEach(cb => {
                cb.checked = true;
            });
            filterCards();
        }
        
        function deselectAllSets() {
            document.querySelectorAll('#set-checkboxes input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            filterCards();
        }
        
        function selectAllSources() {
            document.querySelectorAll('#source-checkboxes input[type="checkbox"]').forEach(cb => {
                cb.checked = true;
            });
            filterCards();
        }
        
        function deselectAllSources() {
            document.querySelectorAll('#source-checkboxes input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            filterCards();
        }
        
        function sortCards() {
            const sortBy = document.getElementById('sort-by').value;
            console.log('sortCards called with:', sortBy);
            
            const dealsTab = document.getElementById('deals-tab');
            if (!dealsTab) {
                console.error('deals-tab not found!');
                return;
            }
            
            const sellerCards = Array.from(dealsTab.querySelectorAll('.seller-card'));
            console.log('Found seller cards:', sellerCards.length);
            
            if (sortBy === 'default') {
                // Default: keep original seller grouping
                // Hide sorted container if it exists
                const sortedContainer = dealsTab.querySelector('.sorted-deals-container');
                if (sortedContainer) {
                    sortedContainer.style.display = 'none';
                }
                // Show original seller cards
                sellerCards.forEach(card => card.style.display = 'block');
                // Trigger filter to restore visibility
                filterCards();
                return;
            }
            
            // Collect all deals across all sellers
            const allDeals = [];
            sellerCards.forEach(sellerCard => {
                const deals = Array.from(sellerCard.querySelectorAll('.deal'));
                deals.forEach(deal => {
                    allDeals.push({
                        element: deal,
                        price: parseFloat(deal.getAttribute('data-price')) || 0,
                        discount: parseFloat(deal.getAttribute('data-discount')) || 0,
                        cardName: deal.getAttribute('data-card-name') || '',
                        set: deal.getAttribute('data-set') || '',
                        quality: parseInt(deal.getAttribute('data-quality')) || 0,
                        sellerCard: sellerCard
                    });
                });
            });
            console.log('Total deals collected:', allDeals.length);
            console.log('Sample deal data:', allDeals[0]);
            
            // Sort based on selected option
            allDeals.sort((a, b) => {
                switch(sortBy) {
                    case 'price-low':
                        return a.price - b.price;
                    case 'price-high':
                        return b.price - a.price;
                    case 'discount-high':
                        return b.discount - a.discount;
                    case 'discount-low':
                        return a.discount - b.discount;
                    case 'name-az':
                        return a.cardName.localeCompare(b.cardName);
                    case 'name-za':
                        return b.cardName.localeCompare(a.cardName);
                    case 'set-az':
                        return a.set.localeCompare(b.set);
                    case 'quality':
                        // Quality first (high to low), then discount (high to low)
                        if (b.quality !== a.quality) {
                            return b.quality - a.quality;
                        }
                        return b.discount - a.discount;
                    default:
                        return 0;
                }
            });
            
            // Hide all original seller cards
            sellerCards.forEach(card => card.style.display = 'none');
            
            // Create a single container for sorted deals
            let sortedContainer = dealsTab.querySelector('.sorted-deals-container');
            if (!sortedContainer) {
                sortedContainer = document.createElement('div');
                sortedContainer.className = 'sorted-deals-container';
                sortedContainer.style.cssText = 'background: white; border-radius: 16px; padding: 25px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);';
                dealsTab.appendChild(sortedContainer);
            }
            
            // Clear and repopulate
            const sortLabel = {
                'price-low': 'Price: Low ‚Üí High',
                'price-high': 'Price: High ‚Üí Low',
                'discount-high': 'Discount: High ‚Üí Low',
                'discount-low': 'Discount: Low ‚Üí High',
                'name-az': 'Name: A ‚Üí Z',
                'name-za': 'Name: Z ‚Üí A',
                'set-az': 'Set: A ‚Üí Z',
                'quality': 'Quality (Excellent ‚Üí Good)'
            }[sortBy] || 'Sorted';
            
            sortedContainer.innerHTML = `<div style="background: linear-gradient(135deg, #6B5844, #C5A572); color: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <h2 style="margin: 0; font-size: 1.3em;">üîÑ Sorted View: ${sortLabel}</h2>
                <p style="margin: 5px 0 0 0; font-size: 0.9em; opacity: 0.9;">Cards are sorted and ungrouped by seller</p>
            </div><div class="deals" style="display: grid; gap: 15px;"></div>`;
            const dealsContainer = sortedContainer.querySelector('.deals');
            
            allDeals.forEach(item => {
                const clonedDeal = item.element.cloneNode(true);
                dealsContainer.appendChild(clonedDeal);
            });
            
            console.log('Sorted container populated with', allDeals.length, 'deals');
            sortedContainer.style.display = 'block';
            console.log('Sorted container should now be visible');
            
            // Apply current filters to sorted view
            filterCards();
        }
        
        function resetFilters() {
            // Select all sets and sources by default
            selectAllSets();
            selectAllSources();
            // Clear seller filter
            document.getElementById('seller-filter').value = '';
            // Clear price filters
            document.getElementById('price-min').value = '';
            document.getElementById('price-max').value = '';
            // Reset sort
            document.getElementById('sort-by').value = 'default';
            
            // Show original seller cards, hide sorted container
            const dealsTab = document.getElementById('deals-tab');
            const sortedContainer = dealsTab.querySelector('.sorted-deals-container');
            if (sortedContainer) {
                sortedContainer.style.display = 'none';
            }
            document.querySelectorAll('.seller-card').forEach(card => {
                card.style.display = 'block';
            });
        }
    </script>
</body>
</html>
